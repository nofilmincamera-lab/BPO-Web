# BPO Intelligence Pipeline - Python Dependencies
# Pin all versions for reproducibility
# Python 3.11+ required

# ============================================================================
# CORE FRAMEWORK
# ============================================================================
fastapi==0.115.0
uvicorn[standard]==0.31.1
pydantic==2.9.2
pydantic-settings==2.5.2
python-dotenv==1.0.1

# ============================================================================
# PREFECT WORKFLOW ORCHESTRATION
# ============================================================================
prefect==3.1.9
prefect-docker==0.6.0

# ============================================================================
# DOCKER OPERATIONS
# ============================================================================
# Required by prefect-docker for work pool operations
docker==7.1.0

# ============================================================================
# DATABASE
# ============================================================================
# Active: asyncpg for direct PostgreSQL access (used in all flows)
asyncpg==0.29.0
# Removed: psycopg, SQLAlchemy, alembic, pgvector (unused - no ORM/migrations in active code)
# Note: pgvector extension still available in postgres container, just not using Python client

# ============================================================================
# DATA HANDLING & SERIALIZATION
# ============================================================================
# Removed: orjson, ujson, msgpack (never imported in codebase)
# Using standard library json and Pydantic for serialization

# ============================================================================
# HTML/PDF EXTRACTION
# ============================================================================
trafilatura==1.12.2
readability-lxml==0.8.1
beautifulsoup4==4.12.3
lxml==5.3.0
html5lib==1.1
pdfminer.six==20240706
PyPDF2==3.0.1
pillow==10.4.0
pytesseract==0.3.13
# Unstructured for DOCX and other formats (optional, heavy dependencies)
# unstructured[local-inference]==0.15.13

# ============================================================================
# NLP & NER
# ============================================================================
# GPU-enabled spaCy for CUDA acceleration (RTX 3060, CUDA 12.1)
# Use spacy[cuda121] for CUDA 12.1 support
spacy[cuda121]==3.8.2
# Run after install: python -m spacy download en_core_web_sm
regex==2024.9.11
dateparser==1.2.0
# Babel for currency/locale formatting
Babel==2.16.0
langcodes==3.4.0
language-data==1.3.0

# ============================================================================
# EMBEDDINGS & VECTOR SIMILARITY
# ============================================================================
sentence-transformers==3.2.0
# GPU-enabled PyTorch for CUDA acceleration (RTX 3060, CUDA 12.1)
# Install with: pip install torch==2.5.1 torchvision==0.20.1 torchaudio==2.5.1 --index-url https://download.pytorch.org/whl/cu121
torch==2.5.1
torchvision==0.20.1
torchaudio==2.5.1
transformers==4.46.0
tokenizers==0.20.1
numpy==1.26.4
scikit-learn==1.5.2

# ============================================================================
# TEXT PROCESSING & UTILITIES
# ============================================================================
# Unicode normalization
unicodedata2==15.1.0
# URL parsing and canonicalization
tldextract==5.1.2
# Hashing for deduplication
xxhash==3.5.0
# Bloom filter for large-scale dedupe
pybloom-live==4.0.0
# Streaming JSON parser for large files
ijson==3.4.0
# Progress bar for long operations
tqdm==4.67.1

# ============================================================================
# VALIDATION & SCHEMA
# ============================================================================
jsonschema==4.23.0
fastjsonschema==2.20.0

# ============================================================================
# HTTP CLIENT (for LLM APIs)
# ============================================================================
httpx==0.27.2
aiohttp==3.10.10

# ============================================================================
# REDIS (Optional Cache)
# ============================================================================
redis==5.1.1
hiredis==3.0.0

# ============================================================================
# MONITORING & LOGGING
# ============================================================================
# Removed: structlog, loguru, prometheus-client, OpenTelemetry stack (never imported)
# Note: Prometheus/Grafana available via docker-compose --profile metrics
# Using Prefect's built-in logging and Python's standard logging module

# ============================================================================
# TESTING
# ============================================================================
pytest==8.3.3
pytest-asyncio==0.24.0
pytest-cov==5.0.0
pytest-mock==3.14.0
# httpx-mock==0.11.0  # Commented out - not available for Python 3.11

# ============================================================================
# DEVELOPMENT & LINTING
# ============================================================================
black==24.10.0
ruff==0.7.0
mypy==1.13.0
# Type stubs
types-redis==4.6.0.20240819
types-setuptools==75.8.0.20250210

# ============================================================================
# CLI & UTILITIES
# ============================================================================
click==8.1.7
rich==13.9.2
typer==0.12.5

# ============================================================================
# SYSTEM UTILITIES
# ============================================================================
# For file magic detection
python-magic==0.4.27
# python-magic-bin==0.4.14  # Windows binary - not available for Linux containers
# For Windows paths
pathlib2==2.3.7.post1
